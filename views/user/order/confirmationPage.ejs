<!-- Header -->
<%- include('../../partials/user/order_header') %>

<main class="p-8 flex-grow justify-center">
    <div class="w-full mx-auto flex flex-col space-y-2 max-w-4xl">
        <h1 class="text-2xl mb-4 text-center">SUMMARY</h1>
        <% products.forEach((product,index)=>{ %>
        <div id="product-<%= product.productId._id %>" class="border rounded-lg p-4 flex bg-orange-200 shadow-md">
            <img alt="Product image" class="w-48 h-48 rounded-lg"
                src="/uploads/product-images/<%= product.productId.image[0] %>"/>
            <div class="flex-1 ml-4">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div class="mb-4 w-4/5 md:mb-0">
                        <h2 class="text-xl font-bold"><%= product.productId.name %></h2>
                        <p class="mt-2 text-gray-600"><%= product.productId.description %></p>
                        <p><%= product.quantity %> included</p>
                    </div>
                    <div class="text-right w-1/5 md:ml-4">
                        <p class="text-lg font-bold">Total: ₹<span id="total-price-<%= product.productId._id %>"><%= product.productId.sellingPrice * product.quantity %></span></p>
                        <p class="text-gray-500">(₹<%= product.productId.sellingPrice %> each)</p>
                    </div>
                </div>
            </div>
        </div>
        <% }) %>
        <div class="bg-orange-300 rounded-md px-2 py-1">
            <h3 class="font-bold text-lg">Total Price: <%= total %></h3>
        </div>
        <div class="mt-8 flex justify-center">
            <a class="bg-orange-300 text-black px-8 py-4 rounded-lg text-xl" href="/user/order/payment?total=<%= total %>">Go to Payment</a>
        </div>
    </div>
</main>